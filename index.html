<!DOCTYPE html>
<html lang="en">
<head>
     <!-- 100% privacy-first analytics -->
<script data-collect-dnt="true" async src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
<noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif?collect-dnt=true" alt="" referrerpolicy="no-referrer-when-downgrade"/></noscript>
     <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "r4ikpxyih2");
</script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Movie & Trailer App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #8a2be2;
            --primary-dark: #6a1b9a;
            --anime: #e91e63;
            --anime-dark: #c2185b;
            --bg: #0f0f12;
            --card-bg: #1e1e24;
            --text: #f0f0f0;
            --text-secondary: #b0b0b0;
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            -webkit-tap-highlight-color: transparent;
            outline: none;
            user-select: none;
        }
        
        body {
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 60px;
            transition: background 0.3s ease;
        }

        body.light-mode {
            --bg: #f5f5f5;
            --card-bg: #ffffff;
            --text: #333333;
            --text-secondary: #666666;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        /* Header & Search */
        .search-container {
            height: 50px;
            position: sticky;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(15, 15, 18, 0.9);
            backdrop-filter: blur(10px);
            padding: 10px 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            transition: background 0.3s ease;
            
        }

        body.light-mode .search-container {
            background: rgba(245, 245, 245, 0.9);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .search-wrapper {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: center;
        }

        .search-container input {
            padding: 10px 15px;
            font-size: 16px;
            width: 70%;
            border: none;
            border-radius: 25px;
            outline: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            text-align: center;
            transition: all 0.3s ease-in-out;
        }

        body.light-mode .search-container input {
            background: rgba(0, 0, 0, 0.05);
            color: var(--text);
        }

        .search-container button {
            padding: 10px 15px;
            font-size: 16px;
            background: var(--primary);
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 25px;
            margin-left: 10px;
            transition: all 0.3s;
        }

        .search-container button:hover {
            background: var(--primary-dark);
        }

        .search-history {
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 70%;
            background: var(--card-bg);
            border-radius: 0 0 15px 15px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1001;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: none;
        }

        .search-history-item {
            padding: 10px 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            cursor: pointer;
            transition: all 0.2s;
        }

        .search-history-item:hover {
            background: rgba(138, 43, 226, 0.1);
        }

        .search-history-item:last-child {
            border-bottom: none;
        }

.reload-btn {
    padding: 10px 15px;
    font-size: 16px;
    background: var(--primary);
    color: white;
    border: none;
    cursor: pointer;
    border-radius: 25px;
    margin-right: 10px;
    transition: all 0.3s;
}

.reload-btn:hover {
    background: var(--primary-dark);
    transform: rotate(90deg);
}
        /* Hero Carousel */
        .hero-section {
        
    width: 100%;
    height: 200px;
    position: relative;
    margin-bottom: 20px;
    overflow: hidden;
    height: calc(100vh - 130px); /* Adjust based on your needs */
    min-height: 300px; /* Minimum height */
}

.hero-carousel {
    display: flex;
    width: 100%;
    height: 100%;
    transition: transform 0.5s ease;
   
    will-change: transform;

}

.hero-item {
    min-width: 100%;
    height: 100%;
    position: relative;
    flex-shrink: 0;
}

.hero-video {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

        .hero-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
        }

        .hero-content h3 {
            font-size: 20px;
            margin-bottom: 8px;
            color: white;
        }

        .hero-content p {
            margin-bottom: 12px;
            font-size: 14px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .hero-btn {
            padding: 6px 16px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .hero-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        /* Content Sections */
        .content {
            margin-top: 60px;
            padding-bottom: 20px;
        }

        .section-title {
            padding: 15px 15px 5px;
            font-size: 20px;
            font-weight: bold;
        }

        body.light-mode .section-title {
            color: var(--text);
        }

        .genre-section {
            margin-bottom: 20px;
        }

        .genre-title {
            padding: 0 15px 5px;
            font-size: 18px;
            font-weight: 600;
            color: var(--primary);
        }

        /* Cards */
        .results-container {
            padding: 15px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 15px;
        }

        @media (min-width: 768px) {
            .results-container {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .results-container {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .card {
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
        }

        .thumbnail {
            width: 100%;
            height: 220px;
            object-fit: cover;
            cursor: pointer;
            display: block;
            transition: transform 0.3s;
        }

        .card:hover .thumbnail {
            transform: scale(1.03);
        }

        .card-content {
            padding: 12px;
        }

        .video-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 5px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        body.light-mode .video-title {
            color: var(--text);
        }

        .channel {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .card-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .views-count {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .likes-count {
            background: rgba(255, 50, 50, 0.2);
            padding: 2px 6px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .trending-badge {
            color: #ff4757;
            animation: pulse 1.5s infinite;
        }

        .favorite-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.5);
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 2;
        }

        .favorite-btn.active {
            color: var(--primary);
            background: rgba(138, 43, 226, 0.7);
        }

        .favorite-btn:hover {
            transform: scale(1.1);
        }

        /* Anime-specific tweak - purple heart for anime */
        .anime-page .likes-count {
            background: rgba(138, 43, 226, 0.2);
        }

        /* Make fire emoji pink for anime */
        .anime-page .trending-badge {
            color: #e91e63;
        }

        @keyframes pulse {
            0% { opacity: 0.8; }
            50% { opacity: 1; }
            100% { opacity: 0.8; }
        }

        /* Pagination */
        .pagination-container {
            position: fixed;
            bottom: 70px;
            left: 0;
            width: 100%;
            background: rgba(0,0,0,0.9);
            padding: 10px 0;
            display: flex;
            justify-content: center;
            z-index: 999;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
            transition: background 0.3s ease;
        }

        body.light-mode .pagination-container {
            background: rgba(245, 245, 245, 0.9);
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }

        .pagination {
            display: flex;
            gap: 10px;
        }

        .pagination button {
            padding: 8px 15px;
            font-size: 14px;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .pagination button.trailer-pagination {
            background: var(--primary);
        }

        .pagination button.movies-pagination {
            background: var(--primary);
        }

        .pagination button.anime-pagination {
            background: var(--anime);
        }

        .pagination button:disabled {
            background: #555;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .pagination button.trailer-pagination:hover:not(:disabled),
        .pagination button.movies-pagination:hover:not(:disabled) {
            background: var(--primary-dark);
        }

        .pagination button.anime-pagination:hover:not(:disabled) {
            background: var(--anime-dark);
        }

        /* Loading & Error States */
        .loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            z-index: 1001;
            display: none;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.2);
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(128, 0, 128, 0.9);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            z-index: 1001;
            display: none;
            max-width: 80%;
        }

        /* Me Page - Updated to vertical list */
        #mePage .results-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 15px;
        }

        .me-card {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 15px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .me-card:hover {
            background: rgba(138, 43, 226, 0.1);
        }

        .avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            flex-shrink: 0;
        }

        .me-card-content {
            flex: 1;
        }

        .me-card-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .me-card-desc {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .theme-switcher {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .theme-btn {
            flex: 1;
            padding: 8px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            transition: all 0.3s;
        }

        .theme-btn.dark {
            background: #333;
            color: white;
        }

        .theme-btn.light {
            background: #f0f0f0;
            color: #333;
        }

        .theme-btn.active {
            outline: 2px solid var(--primary);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 1000;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            transition: background 0.3s ease;
        }

        body.light-mode .bottom-nav {
            background: rgba(255, 255, 255, 0.95);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 12px;
            transition: all 0.3s;
            padding: 5px 10px;
            border-radius: 8px;
        }

        .nav-item i {
            font-size: 20px;
            margin-bottom: 3px;
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-item.anime.active {
            color: var(--anime);
        }

        .nav-item:hover {
            color: var(--primary);
        }

        /* Pages */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .empty-state {
            text-align: center;
            padding: 50px 20px;
            color: var(--text-secondary);
        }

        .empty-state i {
            font-size: 50px;
            margin-bottom: 15px;
            color: var(--primary);
            opacity: 0.5;
        }

        .empty-state.anime i {
            color: var(--anime);
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 70px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            z-index: 10000;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 14px;
        }

        .toast.show {
            opacity: 1;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .search-container input {
                width: 65%;
                font-size: 14px;
                padding: 8px 12px;
            }
            
            .search-container button {
                font-size: 14px;
                padding: 8px 12px;
            }
            
            .thumbnail {
                height: 180px;
            }
            
            .video-title {
                font-size: 14px;
            }
            
            .channel {
                font-size: 12px;
            }
            
            .pagination button {
                padding: 6px 12px;
                font-size: 13px;
            }

            .hero-section {
                height: 180px;
            }

            .hero-content h3 {
                font-size: 18px;
            }

            .hero-content p {
                font-size: 12px;
            }
        }

        @media (max-width: 480px) {
            .search-container {
                padding: 10px;
            }
            
            .search-container input {
                width: 70%;
            }
            
            .thumbnail {
                height: 160px;
            }
            
            .hero-section {
                height: 160px;
            }

            .hero-content {
                padding: 15px;
            }

            .hero-content h3 {
                font-size: 16px;
            }
        }
        
           /* Add modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
        }

        .modal-content {
    background: var(--card-bg);
    max-width: 400px;
    margin: 20vh auto;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    max-height: 70vh; /* Limits modal height to 70% of viewport */
    overflow-y: auto; /* Enables vertical scrolling if content overflows */
}
        .modal-input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            background: rgba(255,255,255,0.05);
            color: var(--text);
            transition: var(--transition);
        }

        body.light-mode .modal-input {
            background: rgba(0,0,0,0.05);
            border-color: rgba(0,0,0,0.1);
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .modal-btn.primary {
            background: var(--primary);
            color: white;
        }

        .modal-btn.secondary {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
            
        }
        
        /* Add this to your existing CSS */
#mePage ~ .pagination-container {
    display: none !important;
}


.notification-list {
  text-align: left;
  margin-top: 15px;
  padding-left: 20px;
  color: var(--text-secondary);
}

.notification-list li {
  margin-bottom: 10px;
  font-size: 14px;
  line-height: 1.5;
}

.tour-toast {
  position: absolute;
  background: var(--card-bg);
  color: var(--text-color);
  padding: 10px 15px;
  border-radius: 10px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  font-size: 14px;
  z-index: 9999;
  max-width: 200px;
  animation: fadeInScale 0.3s ease;
}

@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* ===== Upgraded Me Tab Styles ===== */
.profile-header {
    position: relative;
    margin-bottom: 60px;
}

.profile-banner {
    height: 120px;
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    border-radius: 0 0 15px 15px;
}

.profile-avatar-container {
    text-align: center;
    margin-top: -50px;
}

.profile-avatar {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: var(--card-bg);
    margin: 0 auto 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    border: 3px solid var(--card-bg);
}

.profile-avatar i {
    font-size: 40px;
    color: var(--primary);
}

.profile-progress {
    position: absolute;
    top: -5px;
    left: -5px;
    right: -5px;
    bottom: -5px;
    border-radius: 50%;
    border: 3px solid var(--primary);
    border-top-color: transparent;
    transform: rotate(45deg);
    animation: spin 1.5s linear infinite;
}

.profile-stats {
    display: flex;
    justify-content: space-around;
    padding: 15px;
    background: var(--card-bg);
    margin: 0 15px 25px;
    border-radius: 12px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.stat-item {
    text-align: center;
}

.stat-value {
    font-size: 20px;
    font-weight: bold;
    color: var(--primary);
}

.stat-label {
    font-size: 12px;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 1px;
}

.settings-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    padding: 0 15px;
}

.settings-card {
    background: var(--card-bg);
    border-radius: 12px;
    padding: 20px;
    transition: var(--transition);
    cursor: pointer;
    text-align: center;
}

.settings-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 16px rgba(0,0,0,0.2);
}

.settings-icon {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    margin: 0 auto 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    color: white;
}

.settings-icon.account {
    background: var(--primary);
}

.settings-icon.appearance {
    background: #6a1b9a;
}

.settings-icon.notifications {
    background: #e91e63;
}

.settings-icon.about {
    background: #2196F3;
}

.settings-card h3 {
    margin-bottom: 5px;
    font-size: 16px;
}

.settings-card p {
    font-size: 12px;
    color: var(--text-secondary);
}

/* Responsive Adjustments */
@media (max-width: 480px) {
    .settings-grid {
        grid-template-columns: 1fr;
    }
    .profile-banner {
        height: 100px;
    }
}

.favorite-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  background: rgba(0,0,0,0.5);
  border: none;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  cursor: pointer;
  transition: all 0.3s;
  z-index: 2;
}

.favorite-btn:hover {
  transform: scale(1.1);
}

.favorite-btn.active {
  color: #ff4757; /* Red heart when favorited */
  background: rgba(255, 71, 87, 0.2);
}

.favorite-btn i {
  pointer-events: none; /* Ensures clicks register on the button, not icon */
}

/* Add this to your existing CSS */
#adCountdownModal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(5px);
  z-index: 9999;
  justify-content: center;
  align-items: center;
  animation: fadeIn 0.3s ease-out;
}

#adCountdownModal > div {
  background: linear-gradient(135deg, #1a1a1e 0%, #2a2a32 100%);
  padding: 30px;
  border-radius: 16px;
  width: 80%;
  max-width: 320px;
  text-align: center;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.1);
  transform: scale(0.95);
  animation: scaleUp 0.3s ease-out forwards;
}

#adCountdownModal h3 {
  color: #fff;
  font-size: 1.4rem;
  margin-bottom: 15px;
  font-weight: 600;
  letter-spacing: 0.5px;
}

#adCountdownModal p {
  color: rgba(255, 255, 255, 0.7);
  font-size: 0.9rem;
  margin-top: 10px;
}

#countdown {
  color: #8a2be2; /* Your primary purple color */
  font-weight: bold;
  font-size: 1.6rem;
  display: inline-block;
  min-width: 30px;
  text-align: center;
  animation: pulse 1.5s infinite;
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes scaleUp {
  from { transform: scale(0.95); }
  to { transform: scale(1); }
}

@keyframes pulse {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.1); opacity: 0.8; }
  100% { transform: scale(1); opacity: 1; }
}

/* Responsive adjustments */
@media (max-width: 480px) {
  #adCountdownModal > div {
    padding: 25px 20px;
    width: 85%;
  }
  
  #adCountdownModal h3 {
    font-size: 1.2rem;
  }
  
  #countdown {
    font-size: 1.4rem;
  }
}
    </style>
</head>
<body>
     
     
<!--Keep the script only once in a hidden container to initialize the ad -->
     <div style="display:none;">
  <div id="container-c53c47fd171910c4da636669b2c26e51"></div>
  <script async="async" data-cfasync="false" src="//pl24473149.profitableratecpm.com/c53c47fd171910c4da636669b2c26e51/invoke.js"></script>
</div>

     <!-- Banner Image with Link 
    <a href="https://t.me/tubetrailer" target="_blank" class="banner-container">
        <img src="https://i.ibb.co/xtYxLbVR/20250405-204332.jpg" alt="TubeTrailer Telegram Channel" class="banner">
    </a>
-->
    <div class="search-container">
  <div class="search-wrapper">
    <button id="reloadBtn" onclick="clearAllCache()" class="reload-btn">
      <i class="fas fa-sync-alt"></i>
    </button>

    <input 
      type="text" 
      id="search" 
      placeholder="Search for movies..." 
      onfocus="showSearchHistory()" 
      onblur="hideSearchHistory()" 
      oninput="filterSearchHistory()" 
      onkeypress="handleKeyPress(event)"
    >

    <button onclick="searchContent()"><i class="fas fa-search"></i></button>

    <!-- Dropdown for recent searches -->
    <div class="search-history" id="searchHistoryList"></div>
  </div>
</div>

    <iframe style="border:none; width:100%; height:140px;" scrolling="no"
srcdoc='
  <!DOCTYPE html>
  <html>
  <head>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: #00000;
        color: #555;
      }
      .ad-label {
        padding: 10px 0;
        font-size: 14px;
        font-weight: 600;
        color: #888;
        letter-spacing: 0.5px;
        text-transform: uppercase;
        border-bottom: 1px solid #eee;
        margin-bottom: 8px;
      }
      
       
    </style>
  </head>
  <body>
      
      
    <div class="ad-label"></div>
    <div id="container-c53c47fd171910c4da636669b2c26e51"></div>
    <script async data-cfasync="false" src="//pl24473149.profitableratecpm.com/c53c47fd171910c4da636669b2c26e51/invoke.js"></script>
  </body>
  </html>
'></iframe>



    <div class="content">
        <div id="trailerPage" class="page active">
            <div class="results-container" id="trailerResults"></div>
        </div>

        <div id="moviesPage" class="page">
            
            <div              class="results-container" id="moviesResults"></div>
        </div>

        <div id="animePage" class="page">
            <div class="results-container" id="animeResults"></div>
        </div>
        
        <!-- Add this Me Page section -->
   <!-- Upgraded Me Tab -->
<div id="mePage" class="page">
    <!-- Profile Header -->
    <div class="profile-header">
        <div class="profile-banner"></div>
        <div class="profile-avatar-container">
            <div class="profile-avatar">
                <i class="fas fa-user"></i>
                <div class="profile-progress"></div>
            </div>
            <h2 id="userProfileName">Guest User</h2>
            <p id="userStatus">Basic Member</p>
        </div>
    </div>

    <!-- Stats Bar -->
    <div class="profile-stats">
        
        <div class="stat-item">
            <div class="stat-value" id="watchHistoryCount">0</div>
            <div class="stat-label">Watched</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="searchHistoryCount">0</div>
            <div class="stat-label">Searches</div>
        </div>
    </div>

    <!-- Settings Grid -->
    <div class="settings-grid">
        <div class="settings-card" onclick="showAccountModal()">
            <div class="settings-icon account">
                <i class="fas fa-user-cog"></i>
            </div>
            <h3>Account</h3>
            <p>Manage profile and preferences</p>
        </div>
        
       <div class="settings-card" onclick="toggleTheme()">
            <div class="settings-icon appearance">
                <i class="fas fa-palette"></i>
            </div>
            <h3>Appearance</h3>
            <p>Theme and display options</p>
        </div>
        
        <div class="settings-card" onclick="showNotificationModal()">
            <div class="settings-icon notifications">
                <i class="fas fa-bell"></i>
            </div>
            <h3>Notifications</h3>
            <p>Alerts and reminders</p>
        </div>
        
        <div class="settings-card" onclick="showAboutModal()">
            <div class="settings-icon about">
                <i class="fas fa-info-circle"></i>
            </div>
            <h3>About</h3>
            <p>App info and help</p>
        </div>
    </div>
</div>
<!--
        <div id="historyPage" class="page">
            <div class="results-container" id="historyContainer"></div>
        </div>
    </div>
    -->

    <div class="pagination-container" id="trailerPagination" style="display: none;">
        <div class="pagination">
            <button id="trailerPrevBtn" class="trailer-pagination" onclick="prevPage()"><i class="fas fa-chevron-left"></i> Previous</button>
            <button id="trailerNextBtn" class="trailer-pagination" onclick="nextPage()">Next <i class="fas fa-chevron-right"></i></button>
        </div>
    </div>

    <div class="pagination-container" id="moviesPagination" style="display: none;">
        <div class="pagination">
            <button id="moviesPrevBtn" class="movies-pagination" onclick="moviesPrevPage()"><i class="fas fa-chevron-left"></i> Previous</button>
            <button id="moviesNextBtn" class="movies-pagination" onclick="moviesNextPage()">Next <i class="fas fa-chevron-right"></i></button>
        </div>
    </div>

    <div class="pagination-container" id="animePagination" style="display: none;">
        <div class="pagination">
            <button id="animePrevBtn" class="anime-pagination" onclick="animePrevPage()"><i class="fas fa-chevron-left"></i> Previous</button>
            <button id="animeNextBtn" class="anime-pagination" onclick="animeNextPage()">Next <i class="fas fa-chevron-right"></i></button>
        </div>
    </div>

    <div class="bottom-nav">
    <a href="#" class="nav-item active" onclick="showPage('trailerPage')">
        <i class="fas fa-film"></i>
        <span>Trailers</span>
    </a>
    <a href="#" class="nav-item" onclick="showPage('moviesPage')">
        <i class="fas fa-video"></i>
        <span>Movies</span>
    </a>
    <a href="#" class="nav-item" onclick="showPage('animePage')">
        <i class="fas fa-dragon"></i>
        <span>Anime</span>
    </a>
    
    <a href="downloads.html" class="nav-item">
  <i class="fas fa-download"></i>
  <span>Download</span>
</a>
    <a href="#" class="nav-item" onclick="showPage('mePage')">
        <i class="fas fa-user"></i>
        <span>Me</span>
    </a>
</div>
    
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>Loading...</p>
    </div>

    <div class="error-message" id="errorMessage"></div>
    
    </div>
    

    <script>
         
         function trackStatcounterEvent(eventName) {
    if (typeof sc_project !== 'undefined' && typeof sc_invisible !== 'undefined') {
        // Statcounter's default tracking method
        var sc = sc_project;
        var sec = sc_security;
        var r = new Date().getTime();
        var url = "https://www.statcounter.com/counter/counter.js?" + r;
        
        // Create a new script element
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.async = true;
        script.src = url;
        
        // Insert the script into the DOM
        document.getElementsByTagName('head')[0].appendChild(script);
        
        // Optional: You can also track custom events if needed
        console.log(`Tracked event: ${eventName}`);
    }
}

         function showNotificationModal() {
  document.getElementById('notificationModal').style.display = 'block';
}

function hideNotificationModal() {
  document.getElementById('notificationModal').style.display = 'none';
}

         // Add these functions to your script
function setTheme(theme) {
    if (theme === 'dark') {
        document.body.classList.remove('light-mode');
        document.body.classList.add('dark-mode');
        localStorage.setItem('themePreference', 'dark');
    } else {
        document.body.classList.remove('dark-mode');
        document.body.classList.add('light-mode');
        localStorage.setItem('themePreference', 'light');
    }
}

function showAboutModal() {
  document.getElementById('aboutModal').style.display = 'block';
}

function hideAboutModal() {
  document.getElementById('aboutModal').style.display = 'none';
}

// Initialize theme on load
document.addEventListener('DOMContentLoaded', function() {
    const savedTheme = localStorage.getItem('themePreference') || 'dark';
    setTheme(savedTheme);
   
});

function toggleTheme() {
    const isLight = document.body.classList.contains('light-mode');
    setTheme(isLight ? 'dark' : 'light');
    showToast(`Switched to ${isLight ? 'Dark' : 'Light'} Mode`);
}

         function showAccountModal() {
        const modal = document.getElementById('accountModal');
        const user = JSON.parse(localStorage.getItem('userProfile')) || {};
        document.getElementById('userName').value = user.name || '';
        document.getElementById('userEmail').value = user.email || '';
        modal.style.display = 'block';
    }

    function closeModal() {
        document.getElementById('accountModal').style.display = 'none';
    }

    function saveAccount(e) {
    e.preventDefault();
    const userProfile = {
        name: document.getElementById('userName').value.trim(),
        email: document.getElementById('userEmail').value.trim(),
        joined: new Date().toISOString()
    };
    
    localStorage.setItem('userProfile', JSON.stringify(userProfile));
    updateUserStatus();
    closeModal();
    showToast('Profile saved successfully');
}

    function updateUserStatus() {
    const user = JSON.parse(localStorage.getItem('userProfile')) || {};
    const statusElement = document.getElementById('userStatus');
    const nameElement = document.getElementById('userProfileName');
    
    if (user && user.name) {
        if (nameElement) nameElement.textContent = user.name;
        if (statusElement) statusElement.textContent = "Premium Member";
        
        // Update avatar in the new design
        const avatarIcon = document.querySelector('.profile-avatar i');
        if (avatarIcon) {
            avatarIcon.className = 'fas fa-user-check';
            avatarIcon.parentElement.style.backgroundColor = '#4CAF50';
        }
    } else {
        if (nameElement) nameElement.textContent = 'Guest User';
        if (statusElement) statusElement.textContent = 'Basic Member';
        
        // Reset avatar
        const avatarIcon = document.querySelector('.profile-avatar i');
        if (avatarIcon) {
            avatarIcon.className = 'fas fa-user';
            avatarIcon.parentElement.style.backgroundColor = 'var(--primary)';
        }
    }
}

    // Initialize on load
    document.addEventListener('DOMContentLoaded', () => {
        updateUserStatus();
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('accountModal');
            if (event.target === modal) {
                closeModal();
            }
        };
    });
        const apiKeys = [
            "AIzaSyABi7KdpAijF9gu09dSefpXJyhjIRY66Eg",
            "AIzaSyAqLty-6vku33b3bpdG5S4oLkyoimdw8TU",
            "AIzaSyBYixFCdGHJ2P512iW010glQRvd93EB6O8",
            "AIzaSyDLW2mkmVVgQcoUpM86VFtOaCegFvyVk_g",
            "AIzaSyDe7rOrqZFH3vIqP9zBtNkQ0Lqz4mBz9BI",
            "AIzaSyDFH66idOZwfx-PfO1AXdsUeCa2gV1kCk4",
"AIzaSyC_syRSRRxQR1DbtHZzMw9glxcR7My8ly4",
"AIzaSyAlbWmxyzhL2RaNPNlPsANzY7R0JZUj_TU"
        ];
        let currentKeyIndex = 0;

        let trailerCurrentPage = 0;
        let trailerTotalResults = [];
        const trailerResultsPerPage = 20;

        let movieCurrentPage = 0;
        let movieTotalResults = [];
        const movieResultsPerPage = 10;

        let animeCurrentPage = 0;
        let animeTotalResults = [];
        const animeResultsPerPage = 15;

// Add this near your other utility functions
function escapeHtml(unsafe) {
  return unsafe
    .replace(/&/g, "&amp;")
    .replace(/</g, "&lt;")
    .replace(/>/g, "&gt;")
    .replace(/"/g, "&quot;")
    .replace(/'/g, "&#039;");
}
        function getApiKey() {
            return apiKeys[currentKeyIndex];
        }

        function switchApiKey() {
            currentKeyIndex = (currentKeyIndex + 1) % apiKeys.length;
            console.log(`Switched to API key ${currentKeyIndex + 1}`);
        }

        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'flex' : 'none';
        }
        
        function showSearchHistory() {
  const history = JSON.parse(localStorage.getItem('searchHistory')) || [];
  const list = document.getElementById('searchHistoryList');
  const displayItems = history.slice(0, 10); // Last 10 only

  list.innerHTML = '';
  displayItems.forEach(item => {
    const div = document.createElement('div');
    div.className = 'search-history-item';
    div.textContent = item.query;
    div.onclick = () => {
      document.getElementById('search').value = item.query;
      list.style.display = 'none';
      searchContent();
    };
    list.appendChild(div);
  });

  if (displayItems.length > 0) {
    list.style.display = 'block';
  }
}

function hideSearchHistory() {
  // Delay so click still registers
  setTimeout(() => {
    document.getElementById('searchHistoryList').style.display = 'none';
  }, 150);
}

function filterSearchHistory() {
  const input = document.getElementById('search').value.toLowerCase();
  const allItems = document.querySelectorAll('.search-history-item');

  allItems.forEach(item => {
    item.style.display = item.textContent.toLowerCase().includes(input) ? 'block' : 'none';
  });
}

        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }


        function showPage(pageId) {
    // Switch visible page
    document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
    });
    document.getElementById(pageId).classList.add('active');

    // Update bottom nav active state
    document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
        const onclickAttr = item.getAttribute('onclick') || '';
        if (onclickAttr.includes(pageId)) {
            item.classList.add('active');
            if (pageId === 'animePage') {
                item.classList.add('anime');
            }
        }
    });

    // Load data if needed
    if (pageId === 'trailerPage' && trailerTotalResults.length === 0) {
        fetchTrendingTrailers();
    } else if (pageId === 'moviesPage' && movieTotalResults.length === 0) {
        fetchTrendingMovies();
    } else if (pageId === 'animePage' && animeTotalResults.length === 0) {
        fetchTrendingAnime();
    } else if (pageId === 'historyPage') {
        loadHistory();
    }

    // Show/hide search bar
    const searchBar = document.querySelector('.search-container');
    if (pageId === 'mePage') {
        searchBar.style.display = 'none';
        updateMeTabStats(); // Update stats if needed
    } else {
        searchBar.style.display = 'flex';
    }

    // Hide all pagination if on Me page
    document.querySelectorAll('.pagination-container').forEach(p => {
        if (pageId === 'mePage') {
            p.style.display = 'none';
        }
    });
}
        function searchContent() {
    const query = document.getElementById('search').value.trim();
    if (!query) return;

    // 1. Save to search history (for dropdown)
    saveToHistory(query, ""); // No thumbnail needed for search history

    // 2. Update search count in localStorage
    let searches = JSON.parse(localStorage.getItem('searchCount')) || 0;
    searches++;
    localStorage.setItem('searchCount', searches);

    // 3. Update Me tab stats if open
    if (document.getElementById('mePage').classList.contains('active')) {
        updateMeTabStats();
    }

    // Rest of your search logic...
    const activePage = document.querySelector('.page.active').id;
    if (activePage === 'trailerPage') {
        searchTrailers(query);
    } else if (activePage === 'moviesPage') {
        searchMovies(query);
    } else if (activePage === 'animePage') {
        searchAnime(query);
    }
}
 
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                searchContent();
            }
        }

        // Trailer Functions
        async function fetchTrendingTrailers() {
            showLoading(true);
            try {
                const response = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=50&order=viewCount&q=latest+movie+trailers&type=video&key=${getApiKey()}`);
                const data = await response.json();

                if (data.error) {
                    if (data.error.code === 403) {
                        switchApiKey();
                        return fetchTrendingTrailers();
                    }
                    throw new Error(data.error.message);
                }

                trailerTotalResults = data.items || [];
                trailerCurrentPage = 0;
                displayTrailerResults();
                updateTrailerPagination();
            } catch (error) {
                showError(`Failed to load trailers: ${error.message}`);
            } finally {
                showLoading(false);
            }
        }

        async function searchTrailers(query) {
            showLoading(true);
            try {
                const response = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=50&q=${encodeURIComponent(query + ' trailer')}&type=video&key=${getApiKey()}`);
                const data = await response.json();

                if (data.error) {
                    if (data.error.code === 403) {
                        switchApiKey();
                        return searchTrailers(query);
                    }
                    throw new Error(data.error.message);
                }

                trailerTotalResults = data.items || [];
                trailerCurrentPage = 0;
                displayTrailerResults();
                updateTrailerPagination();
                if (query) {
  saveToHistory(query, trailerTotalResults[0]?.snippet?.thumbnails?.medium?.url || '');
}
            } catch (error) {
                showError(`Failed to search trailers: ${error.message}`);
            } finally {
                showLoading(false);
            }
        }
        
 function generateVideoCard(video) {
  const card = document.createElement('div');
  card.className = 'card';
  
  // Check if this video is already favorited
  const favorites = JSON.parse(localStorage.getItem('favorites')) || [];
  const isFavorited = favorites.some(fav => fav.videoId === video.id.videoId);

  card.innerHTML = `
    <button class="favorite-btn ${isFavorited ? 'active' : ''}" 
            onclick="toggleFavorite(event, '${video.id.videoId}', '${escapeHtml(video.snippet.title)}', '${video.snippet.thumbnails.medium.url}')">
      <i class="fas fa-heart"></i>
    </button>
    <img src="${video.snippet.thumbnails.medium.url}" class="thumbnail" 
         onclick="playVideo('${video.id.videoId}', '${escapeHtml(video.snippet.title)}', '${video.snippet.thumbnails.medium.url}')">
    <div class="card-content">
      <div class="video-title">${escapeHtml(video.snippet.title)}</div>
      <div class="channel">${escapeHtml(video.snippet.channelTitle)}</div>
      <div class="card-stats">
        <div class="views-count">
          <i class="fas fa-eye"></i> ${Math.floor(Math.random() * 10000000).toLocaleString()}
        </div>
        <div class="likes-count">
          <i class="fas fa-heart"></i> 
          ${Math.floor(Math.random() * 500000).toLocaleString()}
        </div>
      </div>
    </div>
  `;
  return card;
}

function toggleFavorite(event, videoId, title, thumbnail) {
  event.stopPropagation(); // Prevent triggering card click
  
  const favorites = JSON.parse(localStorage.getItem('favorites')) || [];
  const favIndex = favorites.findIndex(fav => fav.videoId === videoId);
  
  if (favIndex === -1) {
    // Add to favorites
    favorites.push({ 
      videoId, 
      title, 
      thumbnail, 
      date: new Date().toISOString() 
    });
    event.target.classList.add('active');
    showToast('Added to favorites!');
  } else {
    // Remove from favorites
    favorites.splice(favIndex, 1);
    event.target.classList.remove('active');
    showToast('Removed from favorites!');
  }
  
  localStorage.setItem('favorites', JSON.stringify(favorites));
  
  // Update Me tab if open
  if (document.getElementById('mePage').classList.contains('active')) {
    updateMeTabStats();
  }
}
        function displayTrailerResults() {
    const resultsDiv = document.getElementById('trailerResults');
    resultsDiv.innerHTML = '';

    if (trailerTotalResults.length === 0) {
        resultsDiv.innerHTML = `
            <div class="empty-state">
                <i class="fas fa-film"></i>
                <p>No trailers found</p>
            </div>
        `;
        document.getElementById('trailerPagination').style.display = 'none';
        return;
    }

    const start = trailerCurrentPage * trailerResultsPerPage;
    const end = start + trailerResultsPerPage;
    const videos = trailerTotalResults.slice(start, end);

    videos.forEach(video => {
        // Generate random stats (replace with real API data later)
        const views = Math.floor(Math.random() * 10000000).toLocaleString();
        const likes = Math.floor(Math.random() * 500000).toLocaleString();
        const isHot = likes > 300000; // Threshold for "hot" content

        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
            <img src="${video.snippet.thumbnails.medium.url}" class="thumbnail" 
                 onclick="playVideo('${video.id.videoId}', '${video.snippet.title.replace(/'/g, "\\'")}', '${video.snippet.thumbnails.medium.url}')">
            <div class="card-content">
                <div class="video-title">${video.snippet.title}</div>
                <div class="channel">${video.snippet.channelTitle}</div>
                <div class="card-stats">
                    <div class="views-count">
                        <i class="fas fa-eye"></i> ${views}
                    </div>
                    <div class="likes-count">
                        <i class="fas fa-heart"></i>
                        ${isHot ? '<span class="trending-badge">🔥</span>' : ''}
                        ${likes}
                    </div>
                </div>
            </div>
        `;
        resultsDiv.appendChild(card);
    });

    document.getElementById('trailerPagination').style.display = 'flex';
}
        
        // Modify your API calls to include statistics:
async function fetchVideoStats(videoId) {
  const response = await fetch(
    `https://www.googleapis.com/youtube/v3/videos?part=statistics&id=${videoId}&key=${getApiKey()}`
  );
  return await response.json();
}

        function updateTrailerPagination() {
            document.getElementById('trailerPrevBtn').disabled = trailerCurrentPage === 0;
            document.getElementById('trailerNextBtn').disabled = 
                (trailerCurrentPage + 1) * trailerResultsPerPage >= trailerTotalResults.length;
        }

        function prevPage() {
            if (trailerCurrentPage > 0) {
                trailerCurrentPage--;
                displayTrailerResults();
                updateTrailerPagination();
            }
        }

        function nextPage() {
            if ((trailerCurrentPage + 1) * trailerResultsPerPage < trailerTotalResults.length) {
                trailerCurrentPage++;
                displayTrailerResults();
                updateTrailerPagination();
            }
        }

        // Movie Functions
        async function fetchTrendingMovies() {
            showLoading(true);
            try {
                const response = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=50&q=latest+full+movie+-trailer&type=video&videoDuration=long&key=${getApiKey()}`);
                const data = await response.json();

                if (data.error) {
                    if (data.error.code === 403) {
                        switchApiKey();
                        return fetchTrendingMovies();
                    }
                    throw new Error(data.error.message);
                }

                movieTotalResults = data.items || [];
                movieCurrentPage = 0;
                displayMovieResults();
                updateMoviePagination();
            } catch (error) {
                showError(`Failed to load movies: ${error.message}`);
            } finally {
                showLoading(false);
            }
        }

        async function searchMovies(query) {
            showLoading(true);
            try {
                const response = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=50&q=${encodeURIComponent(query + ' full movie -trailer')}&type=video&videoDuration=long&key=${getApiKey()}`);
                const data = await response.json();

                if (data.error) {
                    if (data.error.code === 403) {
                        switchApiKey();
                        return searchMovies(query);
                    }
                    throw new Error(data.error.message);
                }

                movieTotalResults = data.items || [];
                movieCurrentPage = 0;
                displayMovieResults();
                updateMoviePagination();
                if (query) {
  saveToHistory(query, movieTotalResults[0]?.snippet?.thumbnails?.medium?.url || '');
}
            } catch (error) {
                showError(`Failed to search movies: ${error.message}`);
            } finally {
                showLoading(false);
            }
        }

        function displayMovieResults() {
    const resultsDiv = document.getElementById('moviesResults');
    resultsDiv.innerHTML = '';

    if (movieTotalResults.length === 0) {
        resultsDiv.innerHTML = `
            <div class="empty-state">
                <i class="fas fa-video"></i>
                <p>No movies found</p>
            </div>
        `;
        document.getElementById('moviesPagination').style.display = 'none';
        return;
    }

    const start = movieCurrentPage * movieResultsPerPage;
    const end = start + movieResultsPerPage;
    const videos = movieTotalResults.slice(start, end);

    videos.forEach(video => {
        // Generate random stats (replace with real API data later)
        const views = Math.floor(Math.random() * 10000000).toLocaleString();
        const likes = Math.floor(Math.random() * 500000).toLocaleString();
        const isHot = likes > 300000; // Threshold for "hot" content

        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
            <img src="${video.snippet.thumbnails.medium.url}" class="thumbnail" 
                 onclick="playVideo('${video.id.videoId}', '${video.snippet.title.replace(/'/g, "\\'")}', '${video.snippet.thumbnails.medium.url}')">
            <div class="card-content">
                <div class="video-title">${video.snippet.title}</div>
                <div class="channel">${video.snippet.channelTitle}</div>
                <div class="card-stats">
                    <div class="views-count">
                        <i class="fas fa-eye"></i> ${views}
                    </div>
                    <div class="likes-count">
                        <i class="fas fa-heart"></i>
                        ${isHot ? '<span class="trending-badge">🔥</span>' : ''}
                        ${likes}
                    </div>
                </div>
            </div>
        `;
        resultsDiv.appendChild(card);
    });

    document.getElementById('moviesPagination').style.display = 'flex';
}

        function updateMoviePagination() {
            document.getElementById('moviesPrevBtn').disabled = movieCurrentPage === 0;
            document.getElementById('moviesNextBtn').disabled = 
                (movieCurrentPage + 1) * movieResultsPerPage >= movieTotalResults.length;
        }

        function moviesPrevPage() {
            if (movieCurrentPage > 0) {
                movieCurrentPage--;
                displayMovieResults();
                updateMoviePagination();
            }
        }

        function moviesNextPage() {
            if ((movieCurrentPage + 1) * movieResultsPerPage < movieTotalResults.length) {
                movieCurrentPage++;
                displayMovieResults();
                updateMoviePagination();
            }
        }

        // Anime Functions
        async function fetchTrendingAnime() {
            showLoading(true);
            try {
                const response = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=50&q=latest+anime+trailer+OR+full+movie+-review&type=video&key=${getApiKey()}`);
                const data = await response.json();

                if (data.error) {
                    if (data.error.code === 403) {
                        switchApiKey();
                        return fetchTrendingAnime();
                    }
                    throw new Error(data.error.message);
                }

                animeTotalResults = data.items || [];
                animeCurrentPage = 0;
                displayAnimeResults();
                updateAnimePagination();
            } catch (error) {
                showError(`Failed to load anime: ${error.message}`);
            } finally {
                showLoading(false);
            }
        }

        async function searchAnime(query) {
            showLoading(true);
            try {
                const response = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=50&q=${encodeURIComponent(query + ' anime trailer OR full movie')}&type=video&key=${getApiKey()}`);
                const data = await response.json();

                if (data.error) {
                    if (data.error.code === 403) {
                        switchApiKey();
                        return searchAnime(query);
                    }
                    throw new Error(data.error.message);
                }

                animeTotalResults = data.items || [];
                animeCurrentPage = 0;
                displayAnimeResults();
                updateAnimePagination();
                saveToHistory(query, animeTotalResults[0]?.snippet?.thumbnails?.medium?.url);
            } catch (error) {
                showError(`Failed to search anime: ${error.message}`);
            } finally {
                showLoading(false);
            }
        }

        function displayAnimeResults() {
    const resultsDiv = document.getElementById('animeResults');
    resultsDiv.innerHTML = '';

    if (animeTotalResults.length === 0) {
        resultsDiv.innerHTML = `
            <div class="empty-state">
                <i class="fas fa-dragon"></i>
                <p>No anime content found</p>
            </div>
        `;
        document.getElementById('animePagination').style.display = 'none';
        return;
    }

    const start = animeCurrentPage * animeResultsPerPage;
    const end = start + animeResultsPerPage;
    const videos = animeTotalResults.slice(start, end);

    videos.forEach(video => {
        // Generate random stats (replace with real API data later)
        const views = Math.floor(Math.random() * 10000000).toLocaleString();
        const likes = Math.floor(Math.random() * 500000).toLocaleString();
        const isHot = likes > 300000; // Threshold for "hot" content

        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
            <img src="${video.snippet.thumbnails.medium.url}" class="thumbnail" 
                 onclick="playVideo('${video.id.videoId}', '${video.snippet.title.replace(/'/g, "\\'")}', '${video.snippet.thumbnails.medium.url}')">
            <div class="card-content">
                <div class="video-title">${video.snippet.title}</div>
                <div class="channel">${video.snippet.channelTitle}</div>
                <div class="card-stats">
                    <div class="views-count">
                        <i class="fas fa-eye"></i> ${views}
                    </div>
                    <div class="likes-count">
                        <i class="fas fa-heart"></i>
                        ${isHot ? '<span class="trending-badge">🔥</span>' : ''}
                        ${likes}
                    </div>
                </div>
            </div>
        `;
        resultsDiv.appendChild(card);
    });

    document.getElementById('animePagination').style.display = 'flex';
}
        function updateAnimePagination() {
            document.getElementById('animePrevBtn').disabled = animeCurrentPage === 0;
            document.getElementById('animeNextBtn').disabled = 
                (animeCurrentPage + 1) * animeResultsPerPage >= animeTotalResults.length;
        }

        function animePrevPage() {
            if (animeCurrentPage > 0) {
                animeCurrentPage--;
                displayAnimeResults();
                updateAnimePagination();
            }
        }

        function animeNextPage() {
            if ((animeCurrentPage + 1) * animeResultsPerPage < animeTotalResults.length) {
                animeCurrentPage++;
                displayAnimeResults();
                updateAnimePagination();
            }
        }

        // Video Player Functions
        // REPLACE ALL VIDEO-RELATED FUNCTIONS WITH THIS SINGLE FUNCTION:
function playVideo(videoId, title="", thumbnail="") {

// Track the video play event with Statcounter
    trackStatcounterEvent('video_play', {
        videoId: videoId,
        title: title,
        source: 'thumbnail_click'
    });
    
  // 1. Track video play in watch history
  let watchHistory = JSON.parse(localStorage.getItem('watchHistory')) || [];
  watchHistory.unshift({  // Add to beginning of array (newest first)
    videoId: videoId,
    title: title,
    thumbnail: thumbnail,
    date: new Date().toISOString()
  });
  
  // Keep only the last 100 watched items (optional limit)
  if (watchHistory.length > 100) {
    watchHistory = watchHistory.slice(0, 100);
  }
  
  localStorage.setItem('watchHistory', JSON.stringify(watchHistory));
  
  // 2. Update Me tab stats if visible
  if (document.getElementById('mePage').classList.contains('active')) {
    updateMeTabStats();
  }
  
  // 3. Save to search history if title exists (original functionality)
  if (title) {
    saveToHistory(title, thumbnail);
  }

  // 4. Open external player
  const fallbackWindow = window.open(
    `fallback-player.html?v=${videoId}`, 
    '_blank',
    'width=900,height=506,scrollbars=no,location=no'
  );
  
  // 5. Fallback for strict popup blockers
  setTimeout(() => {
    if (!fallbackWindow || fallbackWindow.closed) {
      window.open(
        `https://www.youtube.com/watch?v=${videoId}`,
        '_blank'
      );
    }
  }, 300);
}
        // History Functions
       function saveToHistory(query, thumbnail) {
  let history = JSON.parse(localStorage.getItem('searchHistory')) || [];

  // Remove duplicates (case-insensitive)
  history = history.filter(item => item.query.toLowerCase() !== query.toLowerCase());

  history.unshift({
    query,
    thumbnail,
    date: new Date().toISOString()
  });

  // Only keep last 10
  if (history.length > 10) {
    history = history.slice(0, 10);
  }

  localStorage.setItem('searchHistory', JSON.stringify(history));
}
        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('searchHistory')) || [];
            const container = document.getElementById('historyContainer');
            container.innerHTML = '';

            if (history.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-history"></i>
                        <p>No search history</p>
                    </div>
                `;
                return;
            }

            history.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.onclick = () => searchFromHistory(item.query);
                
                historyItem.innerHTML = `
                    ${item.thumbnail ? `<img src="${item.thumbnail}" class="history-thumbnail">` : ''}
                    <div class="history-content">
                        <div class="history-query">${item.query}</div>
                        <div class="history-date">${new Date(item.date).toLocaleString()}</div>
                    </div>
                `;
                
                container.appendChild(historyItem);
            });
        }

        function searchFromHistory(query) {
            document.getElementById('search').value = query;
            
            if (query.toLowerCase().includes('trailer')) {
                showPage('trailerPage');
                searchTrailers(query.replace('trailer', '').trim());
            } else if (query.toLowerCase().includes('anime')) {
                showPage('animePage');
                searchAnime(query);
            } else {
                showPage('moviesPage');
                searchMovies(query);
            }
        }
        
        

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            fetchTrendingTrailers();
            
            const lastSearch = localStorage.getItem('lastSearch');
            if (lastSearch) {
                document.getElementById('search').value = lastSearch;
            }
            
            document.getElementById('search').addEventListener('input', (e) => {
                localStorage.setItem('lastSearch', e.target.value);
            });
        });
        
        function clearAllCache() {
    Object.keys(localStorage).forEach(key => {
        if (key.startsWith('preload-') || key.includes('Trending') || key.includes('Results')) {
            localStorage.removeItem(key);
        }
    });
    location.reload();
}

//For Tour startup
window.addEventListener('DOMContentLoaded', () => {
  const seenTour = localStorage.getItem("userSeenTour");
  if (!seenTour) {
    setTimeout(() => {
      startUserTour();
    }, 1000); // slight delay after load
  }
});

// Update Me Tab stats on page load
function updateMeTabStats() {
    // 1. Get watch history count
    const watchHistory = JSON.parse(localStorage.getItem('watchHistory')) || [];
    document.getElementById('watchHistoryCount').textContent = watchHistory.length;

    // 2. Get search count (new)
    const searchCount = JSON.parse(localStorage.getItem('searchCount')) || 0;
    document.getElementById('searchHistoryCount').textContent = searchCount;

    //removed number 3

    // 4. Update username if logged in
    const user = JSON.parse(localStorage.getItem('userProfile'));
    if (user && user.name) {
        document.getElementById('userProfileName').textContent = user.name;
        document.getElementById('userStatus').textContent = "Premium Member";
    }
}
    </script>
    <script async="async" data-cfasync="false" src="//pl22648993.effectiveratecpm.com/89f1e40e0e6d7dcb91eb378512134e8a/invoke.js"></script>
<div id="container-89f1e40e0e6d7dcb91eb378512134e8a"></div>


<!--function for ad redirect-->
<script>
let adCooldown = false;

function showAdCountdownModal() {
  const modal = document.getElementById('adCountdownModal');
  const counter = document.getElementById('countdown');
  let seconds = 3;

  modal.style.display = 'flex';
  counter.textContent = seconds;

  const countdown = setInterval(() => {
    seconds--;
    counter.textContent = seconds;

    if (seconds === 0) {
      clearInterval(countdown);
      modal.style.display = 'none';
      // Redirect in same tab
      window.location.href = "https://pubertytechnicallyknowhow.com/kw2uetiz?key=797d2b2b24f8878787846103f1a02e7d "; // Replace with real link
    }
  }, 1000);
}

// Trigger ad every 60 seconds
setInterval(() => {
  if (!adCooldown) {
    showAdCountdownModal();
    adCooldown = true;
    setTimeout(() => adCooldown = false, 15000); // cooldown resets after 15s
  }
}, 15000); // check every 15s
</script>


<!-- Default Statcounter code for TubeTrailer http://tubetrailer.vercel.app -->
<script type="text/javascript">
var sc_project=13118904; 
var sc_invisible=1; 
var sc_security="0bf9b7d3"; 
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js" async></script>
<noscript><div class="statcounter"><a title="Web Analytics Made Easy -
Statcounter" href="https://statcounter.com/" target="_blank"><img
class="statcounter" src="https://c.statcounter.com/13118904/0/0bf9b7d3/1/"
alt="Web Analytics Made Easy - Statcounter"
referrerPolicy="no-referrer-when-downgrade"></a></div></noscript>
<!-- End of Statcounter Code -->

<!-- Ad Redirect Modal -->
<div id="adCountdownModal" class="modal" style="display: none; justify-content: center; align-items: center;">
  <div style="background:#222; padding:30px; border-radius:12px; width:80%; max-width:320px;">
    <h3>Ad Redirecting in <span id="countdown">5</span>s</h3>
    <p>Tap back button to exit Ad</p>
  </div>
</div>


<div id="notificationModal" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="hideNotificationModal()">&times;</span>
    <h2>Notifications</h2>
    <ul class="notification-list">
      <li><strong>Update:</strong> 250+ Movies added.</li>
      <li><strong>New:</strong> Anime tab now supports trending filters.</li>
      <li><strong>Tip:</strong> Instant Download is coming soon.</li>
    </ul>
  </div>
</div>


<!-- Add the modal markup right before the closing </body> tag -->
    <!-- Account Modal -->
    <div id="accountModal" class="modal">
        <div class="modal-content">
            <h3 style="margin-bottom: 20px;">Account Settings</h3>
            <form id="accountForm" onsubmit="saveAccount(event)">
                <input type="text" class="modal-input" id="userName" placeholder="Your Name" required>
                <input type="email" class="modal-input" id="userEmail" placeholder="Email (optional)">
                <div class="modal-actions">
                    <button type="button" class="modal-btn secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="modal-btn primary">Save</button>
                </div>
            </form>
        </div>
    </div>
    
    <div id="aboutModal" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="hideAboutModal()">&times;</span>
    
    <h2>About This App</h2>
    <p><strong>Version 2.0.0</strong><br>Developed by <i>Younetwork</i></p>
    <br>
    <strong>TUBETRAILER</strong>
    <p>Your gateway to trending trailers, full movies, and anime highlights.</p>
<br>
    <h3>Getting Started</h3>
    <p>Search any title or keyword in the top bar. Use the bottom navigation to switch between:</p>
    <ul>
      <li><p>🎬
      <strong>Trailers</strong> - Latest movie previews</li>
      <li><p>🎥
      <strong>Movies</strong> - Full-length films</li>
      <li><p>🐉
      <strong>Anime</strong> - Series and movies</li>
      
      <li><p>⚙️ <strong>Me</strong> - Profile and settings</li>
    </ul>
<br>
    <h3>Pro Tips</h3>
    <ul>
      <li>🔍 <strong>Smart searches:</strong> Add "trailer" or "full movie" to queries</li>
      <p>
      <li>🌓 <strong>Dark/Light mode:</strong> Toggle in Appearance settings</li>
      <li>🔄 <strong>Reload button:</strong> Top-left icon refreshes recommendations</li>
    </ul>
<p>
    <h3>What's Next?</h3>
    <p>Coming soon: personalized recommendations, more!!</p>
    </p>
  </div>
</div>
</body>
</html>
